(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{104:function(t,e,a){},105:function(t,e,a){"use strict";a.r(e);var s=a(0),o=a.n(s),n=(a(75),a(68)),r=a.n(n),l=a(41),c=a(16),i=a(17),d=a(23),u=a(21),p=a(40),m=a.n(p),h=(a(96),a(97),a(98),function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(c.a)(this,a);for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))).completeTaskHandler=function(){t.props.markAsComplete(t.props.taskIndex)},t.deleteTodoHandler=function(){t.props.deleteTodo(t.props.task)},t}return Object(i.a)(a,[{key:"render",value:function(){var t=this.props.task.completed?null:o.a.createElement("button",{className:"action-btns__complete-btn",onClick:this.completeTaskHandler}," Complete ");return o.a.createElement("li",{className:"task-list-item"},o.a.createElement("div",{className:"task-info"},o.a.createElement("p",{className:"task-info__title"},this.props.task.title),o.a.createElement("p",{className:"task-info__description"},this.props.task.description)),o.a.createElement("div",{className:"action-btns"},t,o.a.createElement("button",{className:"action-btns__delete-btn",onClick:this.deleteTodoHandler},"Delete")))}}]),a}(o.a.Component));h.defaultProps={task:{title:"Task title",description:"Lorem ipsum dolor sit amet.",completed:!1},taskIndex:0,markAsComplete:function(){return console.log("TaskListItem: Default markAsComplete")}};var k=function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(){return Object(c.a)(this,a),e.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var t=this,e=this.props.title.trim()?o.a.createElement("span",{className:"task-list__title"},this.props.title):null,a=this.props.tasks.map((function(e,a){return o.a.createElement(h,{task:e,key:a,taskIndex:a,markAsComplete:t.props.markAsComplete,deleteTodo:t.props.deleteTodo})})),s=this.props.clearable?o.a.createElement("li",{className:"clearControlWrapper"},o.a.createElement("button",{className:"clearBtn",onClick:this.props.clearTodos,disabled:0===this.props.tasks.length}," Clear")):null;return o.a.createElement("ul",{className:"task-list"},e,a,s)}}]),a}(o.a.Component);k.defaultProps={tasks:[{title:"Task 1",description:"List Item",completed:!1},{title:"Task 2",description:"List Item 2",completed:!0}],title:"",clearable:!1};a(99);var f=function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(){return Object(c.a)(this,a),e.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return this.props.show?o.a.createElement("div",{className:"appLoader"},o.a.createElement("div",{className:"appLoader__spinner"}),o.a.createElement("span",null,this.props.text)):null}}]),a}(o.a.Component);f.defaultProps={text:"Loading..."};var b=a(58),v=a(54),E=a(72);a(104);function _(t){var e=t.createTask;return o.a.createElement(E.a,{initialValues:{title:"",description:""},validationSchema:v.a({title:v.b().min(5,"title must be 5 characters or more").required("Missing task title"),description:v.b().required("Missing task description")}),onSubmit:function(t,a){var s=a.resetForm;e(Object(b.a)(Object(b.a)({},t),{},{completed:!1})),s()}},(function(t){return o.a.createElement("form",{className:"create-todo-box",onSubmit:t.handleSubmit},o.a.createElement("div",{className:"box-row"},o.a.createElement("div",{className:"box-row__col"},o.a.createElement("label",{htmlFor:"title"},"Title"),o.a.createElement("input",Object.assign({type:"text",id:"title",name:"title",className:"box-row__col__input"},t.getFieldProps("title"),{placeholder:"Enter task title"})),t.errors.title&&t.touched.title?o.a.createElement("small",{className:"box-row__col__error-message"},"*",t.errors.title):null),o.a.createElement("div",{className:"box-row__col"},o.a.createElement("label",{htmlFor:"description"},"Description"),o.a.createElement("input",Object.assign({type:"text",id:"description",name:"description",className:"box-row__col__input"},t.getFieldProps("description"),{placeholder:"Enter task description"})),t.errors.description&&t.touched.description?o.a.createElement("small",{className:"box-row__col__error-message"},"*",t.errors.description):null),o.a.createElement("button",{type:"submit",className:"box-row__submit"},"Add Todo")))}))}var w=function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(t){var s;return Object(c.a)(this,a),(s=e.call(this,t)).addTaskHandler=function(t){s.showLoader({text:"Please wait..."}),m.a.post("http://localhost:3030/api/create",t).then((function(t){s.isSuccessStatus(t.status)&&s.setState({tasks:[].concat(Object(l.a)(s.state.tasks),[t.data.todo])})})).catch((function(t){return console.error(t.message)})).finally((function(){s.showLoader({state:!1})}))},s.completeTaskHandler=function(t){s.showLoader({state:!0,text:"Completing task..."});var e=Object(l.a)(s.uncompletedTasks),a=e.find((function(e,a){return a===t}));m.a.put("http://localhost:3030/api/complete-todo/".concat(a._id)).then((function(a){s.isSuccessStatus(a.status)&&(e[t]=a.data.todo,s.setState({tasks:[].concat(Object(l.a)(s.completedTasks),Object(l.a)(e))}))})).catch((function(t){return console.error(t)})).finally((function(){s.showLoader({state:!1})}))},s.deleteTodoHandler=function(t){s.showLoader({text:"Deleting task. Please wait..."});var e=t._id;m.a.delete("http://localhost:3030/api/remove/".concat(e)).then((function(t){if(s.isSuccessStatus(t.status)){var e=Object(l.a)(s.state.tasks),a=e.findIndex((function(e){return e._id===t.data.todo._id}));a>-1&&e.splice(a,1),s.setState({tasks:e})}})).catch((function(t){return console.error(t)})).finally((function(){s.showLoader({state:!1})}))},s.isSuccessStatus=function(t){return!(!t||t<100)&&(t>=200&&t<300)},s.clearTodos=function(){s.showLoader({state:!0,text:"Clearing tasks..."}),m.a.delete("http://localhost:3030/api/clear/?completed=true").then((function(t){if(s.isSuccessStatus(t.status))return t.data.todos;throw new Error("Couldn't clear tasks")})).then((function(t){s.setState({tasks:t})})).catch((function(t){return console.error(t.message)})).finally((function(){s.showLoader({state:!1})}))},s.showLoader=function(t){var e=t.state,a=void 0===e||e,o=t.text,n=void 0===o?"Loading...":o;s.setState({loader:{show:a,text:n}})},s.state={tasks:[],loader:{show:!1,text:"Loading..."}},s}return Object(i.a)(a,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(f,{show:this.state.loader.show,text:this.state.loader.text}),o.a.createElement("div",{className:"app"},o.a.createElement("h1",{className:"app__title"},"Todoist"),o.a.createElement(_,{createTask:this.addTaskHandler}),o.a.createElement(k,{title:"uncompleted tasks",deleteTodo:this.deleteTodoHandler,tasks:this.uncompletedTasks,markAsComplete:this.completeTaskHandler}),o.a.createElement(k,{title:"completed tasks",tasks:this.completedTasks,deleteTodo:this.deleteTodoHandler,clearable:!0,clearTodos:this.clearTodos})))}},{key:"componentDidMount",value:function(){var t=this;this.showLoader({state:!0}),m.a.get("http://localhost:3030/api/").then((function(e){var a=e.data,s=e.status;(s>=200||s<300)&&t.setState({tasks:a.todos||[]})})).catch((function(t){return console.error(t)})).finally((function(){t.showLoader({state:!1})}))}},{key:"completedTasks",get:function(){return this.state.tasks.filter((function(t){return t.completed}))}},{key:"uncompletedTasks",get:function(){return this.state.tasks.filter((function(t){return!t.completed}))}}]),a}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},73:function(t,e,a){t.exports=a(105)},75:function(t,e,a){},96:function(t,e,a){},97:function(t,e,a){},98:function(t,e,a){},99:function(t,e,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.440d7632.chunk.js.map